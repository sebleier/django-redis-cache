dist: jammy
language: python
python:
  - "3.8"
  - "3.9"
env:
  - DJANGO_VERSION='>=3.0,<3.1'  # 3.6, 3.7, 3.8, 3.9
  - DJANGO_VERSION='>=3.1,<3.2'  # 3.6, 3.7, 3.8, 3.9
  - DJANGO_VERSION='>=3.2,<4.0'  # 3.6, 3.7, 3.8, 3.9, 3.10
  - DJANGO_VERSION='>=4.0,<4.1'  #           3.8, 3.9, 3.10
  - DJANGO_VERSION='>=4.1,<4.2'  #           3.8, 3.9, 3.10, 3.11
  - DJANGO_VERSION='>=4.2,<5.0'  #           3.8, 3.9, 3.10, 3.11, 3.12
jobs:
  include:
    - python: ['3.6', '3.7']
      env:
        - DJANGO_VERSION='>=3.0,<3.1'
        - DJANGO_VERSION='>=3.1,<3.2'
        - DJANGO_VERSION='>=3.2,<4.0'
    - python: '3.10'
      env: DJANGO_VERSION='>=4.0,<4.1'
    - python: ['3.10', '3.11']
      env: DJANGO_VERSION='>=4.1,<4.2'
    - python: '3.12'
      env: DJANGO_VERSION='>=4.2,<5.0'
# command to run tests
install: ./install_redis.sh
script: make test DJANGO_VERSION=$DJANGO_VERSION
branches:
  only:
    - unstable
    - master
